(this.webpackJsonpaluguelfront=this.webpackJsonpaluguelfront||[]).push([[0],{121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),l=a.n(c),i=a(27),o=a(77),s=a(173),u=a(166),d=a(28),m=a(21),p=Object(d.b)("GET_RESIDENCIAS"),b=Object(d.c)([],Object(m.a)({},p.type,(function(e,t){return t.payload}))),h=Object(d.b)("REQUEST_ERROR"),f=Object(d.c)("",Object(m.a)({},h.type,(function(e,t){return t.payload}))),g=Object(d.a)({reducer:{residencias:b,requestError:f}}),v=a(17),E=a(79),O=a(159),j=a(164),y=a(169),C=a(165),x=a(172),w=a(170),_=a(70),N=a.n(_),R=a(163),S=a(168),k=a(45),z=a(46),I=a(80),P=a(78),A=a(81),L=a(72),B=a.n(L),H=function(e){Object(I.a)(a,e);var t=Object(P.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(z.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:this.props.mapstyle},r.a.createElement(A.a,{bootstrapURLKeys:{key:"AIzaSyBRx0vzhwFusq4BnyhWbhL4VnHmPH1XgfA"},center:this.props.center,zoom:this.props.zoom,heatmapLibrary:!0,heatmap:{positions:this.props.heatmap,options:{radius:20,opacity:.6}}},void 0===this.props.heatmap?r.a.createElement("img",{src:B.a,alt:"pin",lat:this.props.center.lat,lng:this.props.center.lng,style:{height:18,width:10}}):r.a.createElement(r.a.Fragment,null)))}}]),a}(n.Component);H.defaultProps={zoom:11};var D=H,F=a(20),q=a(167),T=a(162),M=a(44),U=a.n(M),V=a(73),W=a.n(V).a.create({baseURL:"http://localhost:8080",proxy:!0}),G=function(){return function(e){W.get("/residencia").then((function(t){e(p(t.data))})).catch((function(t){e(h(t.message)),alert(t)}))}};U.a.setApiKey("AIzaSyBRx0vzhwFusq4BnyhWbhL4VnHmPH1XgfA"),U.a.setLanguage("pt"),U.a.setRegion("br");var J=Object(O.a)({defaultOutlined:{color:"#33C2C2",border:"1px solid #33C2C2"},default:{background:"linear-gradient(45deg, #00598E 50%, #0895A6 99%)",color:"white",float:"right"},fields:{display:"flex",flexDirection:"column",width:200}});function K(){var e=Object(i.b)(),t=J(),a=Object(n.useState)(!1),c=Object(v.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(!1),u=Object(v.a)(s,2),d=u[0],p=u[1],b=Object(n.useState)({cep:!1,numero:!1,residentes:!1}),f=Object(v.a)(b,2),g=f[0],E=f[1],O=r.a.useState({cep:"",numero:"",residentes:"",latitude:0,longitude:0}),j=Object(v.a)(O,2),y=j[0],C=j[1];Object(n.useEffect)((function(){C(y)}),[g]),Object(n.useEffect)((function(){0!==y.latitude&&0!==y.longitude&&d&&w()}),[d,y.latitude,y.longitude]);var x=function(e){return function(t){"cep"===e&&(t.target.value=t.target.value.slice(0,8)),C(Object(F.a)(Object(F.a)({},y),{},Object(m.a)({},e,t.target.value)))}},w=function(){var t,a={cep:parseInt(y.cep),numero:parseInt(y.numero),residentes:parseInt(y.residentes),latitude:parseFloat(y.latitude),longitude:parseFloat(y.longitude)};e((t=a,function(e){W.post("/residencia",t).then((function(t){e(h(200)),e(G())})).catch((function(t){e(h(t.message))}))})),p(!1),C({cep:"",numero:"",residentes:"",latitude:0,longitude:0})};return r.a.createElement("form",{style:{marginTop:"20px"},noValidate:!0,autoComplete:"off"},r.a.createElement("div",null,0!==y.latitude&&0!==y.longitude?r.a.createElement(D,{zoom:16,center:{lat:y.latitude,lng:y.longitude},mapstyle:{height:"20vh",width:"20vh",float:"left"}}):r.a.createElement(D,{zoom:16,center:{lat:-23.5628302,lng:-46.6546177},mapstyle:{height:"20vh",width:"20vh",float:"left"}}),r.a.createElement("div",{className:t.fields},r.a.createElement(q.a,{id:"cep",label:"CEP",style:{margin:8},placeholder:"CEP",onChange:x("cep"),type:"tel",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",value:y.cep,error:g.cep,onBlur:function(){U.a.fromAddress(y.cep).then((function(e){var t=e.results[0].geometry.location,a=t.lat,n=t.lng;C(Object(F.a)(Object(F.a)({},y),{},{latitude:a,longitude:n})),E(Object(F.a)(Object(F.a)({},g),{},{cep:!1}))}),(function(t){console.error(t),E(Object(F.a)(Object(F.a)({},g),{},{cep:!0})),e(h("CEP n\xe3o encontrado"))}))}}),r.a.createElement(q.a,{id:"numero",label:"N\xfamero",style:{margin:8},placeholder:"N\xfamero",onChange:x("numero"),type:"tel",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",value:y.numero,error:g.numero}),r.a.createElement(q.a,{id:"residentes",label:"N\xfamero de Residentes",style:{margin:8},placeholder:"Residentes",onChange:x("residentes"),type:"number",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",value:y.residentes,error:g.residentes}))),r.a.createElement("div",null,r.a.createElement(T.a,{variant:"contained",className:t.default,onClick:function(){var t=!1,a=g;8!==y.cep.length?(t=!0,a.cep=!0,e(h("Cep inv\xe1lido!"))):a.cep=!1,0===y.numero.length?(t=!0,a.numero=!0):a.numero=!1,0===y.residentes.length?(t=!0,a.residentes=!0):a.residentes=!1,E(a),o(!l),t?e(h("Preencha todas as informa\xe7\xf5es!")):p(!0)}},"Enviar")))}a(121),a(122);function X(e){return r.a.createElement(w.a,Object.assign({elevation:6,variant:"filled"},e))}function Q(e){var t=e.children,a=e.value,n=e.index,c=Object(E.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),a===n&&r.a.createElement(S.a,{p:3},r.a.createElement(R.a,null,t)))}function Y(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Z=Object(O.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},tabs:{borderRight:"1px solid ".concat(e.palette.divider),marginRight:"5px",height:"100%",minWidth:80},tab:{width:"100%"},tab_overflow:{height:"100%",overflowY:"scroll"}}}));function $(){var e=r.a.useState(0),t=Object(v.a)(e,2),a=t[0],c=t[1],l=Object(i.b)(),o=Object(n.useState)(!1),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(v.a)(m,2),b=p[0],f=p[1],g=Object(i.c)((function(e){return e.requestError})),E=Object(i.c)((function(e){return e.residencias})),O=Object(n.useState)([]),w=Object(v.a)(O,2),_=w[0],R=w[1],S=Object(n.useState)(""),k=Object(v.a)(S,2),z=k[0],I=k[1],P=Z();Object(n.useEffect)((function(){l(G())}),[]),Object(n.useEffect)((function(){200!=g?0!==g.length&&(I(g),f(!0)):d(!0)}),[g]),Object(n.useEffect)((function(){var e=[];E.map((function(t){e.push({lat:t.latitude,lng:t.longitude,weight:t.residentes})})),R(e)}),[E]);var A=function(e,t){"clickaway"!==t&&(d(!1),l(h("")))},L=function(e,t){"clickaway"!==t&&(f(!1),I(""),l(h("")))};return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navcontainer"},r.a.createElement("img",{src:N.a,alt:"logo-icon",style:{width:"170px",height:"39px"}}),r.a.createElement("span",{className:"content__tabs__text"},"Desafio SunTech - Renan Paiva Oliveira Costa"))),r.a.createElement("div",{className:"containerMessages"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content__header"},r.a.createElement("div",{className:P.root},r.a.createElement(j.a,{position:"static"},r.a.createElement(y.a,{value:a,onChange:function(e,t){c(t)},"aria-label":"graph tabs",centered:!0},r.a.createElement(C.a,Object.assign({label:r.a.createElement("span",{className:"content__tabs__text"},"Mapa de Resid\xeancias")},Y(0))),r.a.createElement(C.a,Object.assign({label:r.a.createElement("span",{className:"content__tabs__text"},"Cadastrar Nova Resid\xeancia")},Y(1))))),r.a.createElement(Q,{value:a,index:0,className:P.tab_overflow},r.a.createElement(D,{zoom:4,center:{lat:-10.2415,lng:-52.3721},heatmap:_,mapstyle:{height:"70vh",width:"100%"}})),r.a.createElement(Q,{value:a,index:1,className:P.tab_overflow},r.a.createElement(K,null)))))),r.a.createElement(x.a,{open:u,autoHideDuration:3e3,onClose:A,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(X,{onClose:A,severity:"success"},"A\xe7\xe3o executada com sucesso!")),r.a.createElement(x.a,{open:b,autoHideDuration:3e3,onClose:L,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(X,{onClose:L,severity:"error"},z)))}var ee=Object(o.a)({palette:{primary:{main:"#00598E"},secondary:{main:"#74C04E"}}});ee=Object(s.a)(ee),l.a.render(r.a.createElement(i.a,{store:g},r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{theme:ee},r.a.createElement($,null)))),document.getElementById("root"))},70:function(e,t,a){e.exports=a.p+"static/media/logo-header.b46c32e5.svg"},72:function(e,t,a){e.exports=a.p+"static/media/pin.d02f6594.png"},93:function(e,t,a){e.exports=a(123)}},[[93,1,2]]]);
//# sourceMappingURL=main.03e830b2.chunk.js.map